let url="http://localhost:3000/api/students";var users_list=[];async function getUsers(){try{return await(await fetch(url)).json()}catch(e){console.log(e)}}async function sendUser(e){try{var t={method:"POST",body:JSON.stringify(e),"Content-Type":"application/json"};fetch(url,t)}catch(e){console.log(e)}}async function deleteUser(e){try{var t={method:"DELETE"};fetch(url+"/"+e,t)}catch(e){console.log(e)}}function setMaxDateForm(){var e=new Date,t=document.querySelector('[name="birthday"]'),n=document.querySelector('[name="studyStart"]');t.max=e.toLocaleDateString().replaceAll("/","-"),n.max=e.getFullYear()}function showUsers(t){if(0!=t.length){let e=document.getElementById("temp-user_row").content,r=document.getElementById("table-body"),a=["id","name","surname","lastname","birthday","studyStart","faculty"];t.forEach(t=>{let n=e.cloneNode(!0);a.forEach(e=>{n.querySelector("."+e).textContent=t[e]}),n.querySelector(".actions").setAttribute("id",t.id),n.querySelector(".delete_user").addEventListener("click",eventDelete),r.appendChild(n)})}}function eventForm(e){e.preventDefault();let n=e.target,r={};["name","surname","lastname","birthday","studyStart","faculty"].forEach(e=>{var t=n.querySelector(`[name="${e}"]`).value;r[e]="birthday"==e?new Date(t).toISOString():t}),sendUser(r),getUsers()}function eventDelete(e){deleteUser(e.target.parentNode.getAttribute("id"))}document.getElementById("form").addEventListener("submit",eventForm),document.addEventListener("DOMContentLoaded",async e=>{setMaxDateForm(),showUsers(users_list=await getUsers())});